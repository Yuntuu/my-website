<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Dynamic 3D Rotating Word Cloud</title>
    <script src="https://cdn.jsdelivr.net/npm/TagCloud@2.2.0/dist/TagCloud.min.js"></script>
    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f0f0f0;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            perspective: 1000px;
            min-height: 100vh;
            overflow-x: hidden;
        }
        .tagcloud-container {
            position: relative;
            width: 800px; /* 放大容器宽度 */
            height: 800px; /* 放大容器高度 */
            transition: opacity 0.5s ease;
        }
        .tagcloud-container.faded {
            opacity: 0.3;
        }
        #cloud-canvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
        }
        .center-word {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(-20deg) rotateY(20deg);
            font-size: 36px; /* 放大中心词字体 */
            font-weight: bold;
            color: #4285F4;
            z-index: 10;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .center-word:hover {
            color: #FF0000;
            transform: translate(-50%, -50%) rotateX(-30deg) rotateY(30deg);
        }
        .tagcloud {
            width: 100%;
            height: 100%;
            font-size: 28px; /* 放大词云字体 */
            color: #4285F4;
        }
        .tagcloud--item {
            cursor: pointer;
        }
        .tagcloud--item:hover {
            color: #FF0000;
        }

        /* 详情面板样式 - 优化为透明，只显示文字 */
        #detail {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) rotateX(8deg) rotateY(3deg) translateZ(60px);
            transform-style: preserve-3d;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease, transform 0.5s cubic-bezier(0.34, 1.56, 0.64, 1);
            text-align: center;
            width: 90%; /* Increased width for better horizontal space */
            max-width: 1400px; /* Larger max-width to accommodate side-by-side text */
            height: auto; /* Auto height to expand as needed */
            max-height: none; /* Removed max-height to prevent clipping */
            padding: 30px;
            z-index: 100;
            background: transparent; /* 完全透明背景 */
            border: none; /* 无边框 */
            box-shadow: none; /* 无阴影 */
            overflow: visible; /* Allow full visibility without internal scroll */
        }
        #detail.show {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, -50%) rotateX(8deg) rotateY(3deg) translateZ(100px);
        }

        #detail-title {
            font-size: 36px;
            margin: 0 0 30px 0;
            transform: translateZ(40px);
            text-shadow: 3px 3px 6px rgba(0,0,0,0.2);
            color: #333;
        }

        .comparison {
            display: flex;
            flex-direction: column;
            gap: 30px;
            margin-top: 20px;
            overflow: visible; /* Ensure no overflow issues */
        }
        @media (min-width: 768px) {
            .comparison {
                flex-direction: row;
                justify-content: space-around;
            }
        }

        .comparison > div {
            flex: 1;
            min-width: 300px;
            display: flex;
            flex-direction: column;
            background: transparent; /* 透明 */
            border: none; /* 无边框 */
            box-shadow: none; /* 无阴影 */
        }

        .fifteen, .fourteen {
            background: transparent; /* 完全透明 */
            border-radius: 0; /* 无圆角 */
            padding: 20px;
            box-shadow: none; /* 无阴影 */
            transition: none; /* 移除悬浮效果 */
        }
        .fifteen:hover, .fourteen:hover {
            transform: none; /* 无悬浮变换 */
        }

        .fifteen h3, .fourteen h3 {
            font-size: 24px;
            margin: 0 0 15px 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            transform: translateZ(20px);
        }
        .fifteen h3 { color: #1890ff; }
        .fourteen h3 { color: #faad14; }

        .desc-content {
            flex: none; /* Changed from flex:1 to allow natural height */
            height: auto; /* Auto height for full expansion */
            padding-right: 10px;
            font-size: 15px; /* Reduced font size for better fit and clarity */
            line-height: 1.6; /* Slightly tighter line-height for density without sacrificing readability */
            text-align: left;
            color: #333;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.05);
            scrollbar-width: none; /* Hide scrollbar if any overflow occurs (though avoided) */
            background: transparent; /* 透明 */
            word-wrap: break-word; /* Ensure long words wrap to prevent horizontal overflow */
        }
        .desc-content::-webkit-scrollbar {
            display: none; /* Hide scrollbar in WebKit browsers */
        }
    </style>
</head>
<body>
    <div class="tagcloud-container">
        <canvas id="cloud-canvas"></canvas>
        <div id="center-word" class="center-word">十五五</div>
        <div class="tagcloud"></div>
    </div>

    <div id="detail">
        <h2 id="detail-title">描述对比</h2>
        <div class="comparison">
            <div class="fifteen">
                <h3>十五五</h3>
                <div id="fifteen-desc" class="desc-content"></div>
            </div>
            <div class="fourteen">
                <h3>十四五</h3>
                <div id="fourteen-desc" class="desc-content"></div>
            </div>
        </div>
    </div>

    <script>
        const keywords = ['能', '水', '城', 'AI', '数智化'];

        // 从 Excel 提取的完整描述（已替换）
        const descriptions = {
            '十五五': {
                fifteen: '国民经济和社会发展第十五个五年规划的简称，是指导我国未来五年发展的重要规划文件。规划将围绕经济高质量发展、科技创新、绿色低碳转型、民生保障等核心领域，提出具体发展目标和举措，推动我国在复杂国际环境中实现持续健康发展。',
                fourteen: '国民经济和社会发展第十四个五年规划，主要聚焦于新发展阶段、新发展理念、新发展格局，明确了"十四五"时期经济社会发展的主要目标、重点任务和重大举措，为全面建设社会主义现代化国家开好局、起好步。'
            },
            '能': {
                fifteen: '清洁低碳安全高效的新型能源体系初步建成。\n\n加快新能源、新材料、航空航天、低空经济等战略性新兴产业集群发展。\n\n优化能源骨干通道布局，加力建设新型能源基础设施。\n\n推动战略性产业、能源资源基地等布局优化。\n\n加快建设新型能源体系。持续提高新能源供给比重，推进化石能源安全可靠有序替代，着力构建新型电力系统，建设能源强国。坚持风光水核等多能并举，统筹就地消纳和外送，促进清洁能源高质量发展。加强化石能源清洁高效利用，推进煤电改造升级和散煤替代。全面提升电力系统互补互济和安全韧性水平，科学布局抽水蓄能，大力发展新型储能，加快智能电网和微电网建设。提高终端用能电气化水平，推动能源消费绿色化低碳化。加快健全适应新型能源体系的市场和价格机制。\n\n发展分布式能源，建设零碳工厂和园区。\n\n推动工业、城乡建设、交通运输、能源等重点领域绿色低碳转型。\n\n夯实国家安全基础保障，确保粮食、能源资源、重要产业链供应链、重大基础设施安全。',
                fourteen: '发展战略性新兴产业。加快壮大新一代信息技术、生物技术、新能源、新材料、高端装备、新能源汽车、绿色环保以及航空航天、海洋装备等产业。\n\n推进能源革命，完善能源产供储销体系,加强国内油气勘探开发，加快油气储备设施建设，加快全国干线油气管道建设，建设智慧能源系统，优化电力生产和输送通道布局，提升新能源消纳和存储能力，提升向边远地区输配电能力。\n\n推进能源、铁路、电信、公用事业等行业竞争性环节市场化改革。\n\n推动能源清洁低碳安全高效利用。\n\n确保粮食安全，保障能源和战略性矿产资源安全。'
            },
            '水': {
                fifteen: '加快建设现代化水网，增强洪涝灾害防御、水资源统筹调配、城乡供水保障能力。\n\n坚持山水林田湖草沙一体化保护和系统治理，统筹推进重要生态系统保护和修复重大工程。\n\n高质量推进高标准农田建设，加强黑土地保护和盐碱地综合利用，提升耕地质量。深入实施种业振兴行动，推进高端智能、丘陵山区适用农机装备研发应用，促进良田良种良机良法集成增效。\n\n提高水资源集约安全利用水平。\n\n加强气象、水文、地质灾害监测预报预警。\n\n科学布局抽水蓄能。',
                fourteen: '加强水利基础设施建设，提升水资源优化配置和水旱灾害防御能力。\n\n推进新型基础设施、新型城镇化、交通水利等重大工程建设，支持有利于城乡区域协调发展的重大项目建设。实施川藏铁路、西部陆海新通道、国家水网、雅鲁藏布江下游水电开发、星际探测、北斗产业化等重大工程，推进重大科研设施、重大生态系统保护修复、公共卫生应急保障、重大引调水、防洪减灾、送电输气、沿边沿江沿海交通等一批强基础、增功能、利长远的重大项目建设。\n\n坚持最严格的耕地保护制度，深入实施藏粮于地、藏粮于技战略，加大农业水利设施建设力度，实施高标准农田建设工程，强化农业科技和装备支撑，提高农业良种化水平，健全动物防疫和农作物病虫害防治体系，建设智慧农业。\n\n完善乡村水、电、路、气、通信、广播电视、物流等基础设施，提升农房建设质量。因地制宜推进农村改厕、生活垃圾处理和污水治理，实施河湖水系综合整治，改善农村人居环境。\n\n治理城乡生活环境，推进城镇污水管网全覆盖，基本消除城市黑臭水体。\n\n提升生态系统质量和稳定性。坚持山水林田湖草系统治理，构建以国家公园为主体的自然保护地体系。\n\n实施国家节水行动，建立水资源刚性约束制度。\n\n提高水资源集约安全利用水平。\n\n加快江河控制性工程建设，加快病险水库除险加固。'
            },
            '城': {
                fifteen: '推进城市平急两用公共基础设施建设。\n\n坚持城市内涵式发展，大力实施城市更新，建设创新、宜居、美丽、韧性、文明、智慧的现代化人民城市。扎实推进边境城镇建设。\n\n推动工业、城乡建设、交通运输、能源等重点领域绿色低碳转型。\n\n推动房地产高质量发展。加快构建房地产发展新模式，完善商品房开发、融资、销售等基础制度。\n\n提高防范化解重点领域风险能力，统筹推进房地产、地方政府债务、中小金融机构等风险有序化解，严防系统性风险。',
                fourteen: '加快建设交通强国，完善综合运输大通道、综合交通枢纽和物流网络，加快城市群和都市圈轨道交通网络化，提高农村和边境地区交通通达深度。\n\n推进新型基础设施、新型城镇化、交通水利等重大工程建设，支持有利于城乡区域协调发展的重大项目建设。\n\n推进以人为核心的新型城镇化。实施城市更新行动，推进城市生态修复、功能完善工程，统筹城市规划、建设、管理，合理确定城市规模、人口密度、空间结构，促进大中小城市和小城镇协调发展。强化历史文化保护、塑造城市风貌,加强城镇老旧小区改造和社区建设，增强城市防洪排涝能力，建设海绵城市、韧性城市。提高城市治理水平，加强特大城市治理中的风险防控。坚持房子是用来住的、不是用来炒的定位，租购并举、因城施策，促进房地产市场平稳健康发展。\n\n推进成渝地区双城经济圈建设。推进以县城为重要载体的城镇化建设。\n\n治理城乡生活环境，推进城镇污水管网全覆盖，基本消除城市黑臭水体。'
            },
            'AI': {
                fifteen: '深入推进数字中国建设。健全数据要素基础制度，建设开放共享安全的全国一体化数据市场，深化数据资源开发利用。促进实体经济和数字经济深度融合，实施工业互联网创新发展工程。加快人工智能等数智技术创新，突破基础理论和核心技术，强化算力、算法、数据等高效供给。全面实施“人工智能+”行动，以人工智能引领科研范式变革,加强人工智能同产业发展、文化建设、民生保障、社会治理相结合，抢占人工智能产业应用制高点，全方位赋能千行百业。加强人工智能治理，完善相关法律法规、政策制度、应用规范、伦理准则。完善监管，推动平台经济创新和健康发展。\n\n深化贸易、投资、产业、人文务实合作，拓展绿色发展、人工智能、数字经济、卫生健康、旅游、农业等领域合作新空间。\n\n加强网络、数据、人工智能、生物、生态、核、太空、深海、极地、低空等新兴领域国家安全能力建设。',
                fourteen: '瞄准人工智能、量子信息、集成电路、生命健康、脑科学、生物育种、空天科技、深地深海等前沿领域，实施一批具有前瞻性、战略性的国家重大科技项目。\n\n推动互联网、大数据、人工智能等同各产业深度融合，推动先进制造业集群发展，构建一批各具特色、优势互补、结构合理的战略性新兴产业增长引擎，培育新技术、新产品、新业态、新模式。'
            },
            '数智化': {
                fifteen: '推动技术改造升级，促进制造业数智化转型，发展智能制造、绿色制造、服务型制造，加快产业模式和企业组织形态变革。\n\n推进服务业数智化。\n\n推进传统基础设施更新和数智化改造。\n\n进文化和科技融合，推动文化建设数智化赋能、信息化转型，发展新型文化业态。\n\n优化医疗机构功能定位和布局，实施医疗卫生强基工程，推进全民健康数智化建设。',
                fourteen: '无'
            }
        };

        // 初始化词云
        TagCloud('.tagcloud', keywords, {
            radius: 350, // 放大词云半径以匹配放大的容器
            maxSpeed: 'normal',
            initSpeed: 'normal',
            direction: 135,
            keep: true
        });

        // 连接线条绘制
        const canvas = document.getElementById('cloud-canvas');
        const ctx = canvas.getContext('2d');
        const tagcloudContainer = document.querySelector('.tagcloud-container');
        const detailTitle = document.getElementById('detail-title');

        function resizeCanvas() {
            const container = document.querySelector('.tagcloud-container');
            canvas.width = container.offsetWidth;
            canvas.height = container.offsetHeight;
            drawConnections();
        }

        window.addEventListener('resize', resizeCanvas);
        resizeCanvas();

        function drawConnections() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            const centerEl = document.getElementById('center-word');
            const centerRect = centerEl.getBoundingClientRect();
            const containerRect = canvas.getBoundingClientRect();
            const centerX = centerRect.left + centerRect.width / 2 - containerRect.left;
            const centerY = centerRect.top + centerRect.height / 2 - containerRect.top;

            const tagElements = document.querySelectorAll('.tagcloud--item');
            ctx.strokeStyle = '#ddd';
            ctx.lineWidth = 1.5;

            tagElements.forEach(tag => {
                const tagRect = tag.getBoundingClientRect();
                const tagX = tagRect.left + tagRect.width / 2 - containerRect.left;
                const tagY = tagRect.top + tagRect.height / 2 - containerRect.top;

                ctx.beginPath();
                ctx.moveTo(centerX, centerY);
                ctx.lineTo(tagX, tagY);
                ctx.stroke();
            });

            requestAnimationFrame(drawConnections);
        }

        drawConnections();

        // 点击事件处理
        document.querySelectorAll('.tagcloud--item, #center-word').forEach(item => {
            item.addEventListener('click', (event) => {
                const word = item.innerText.trim();
                const desc = descriptions[word];
                if (desc) {
                    detailTitle.innerText = word;
                    document.getElementById('fifteen-desc').innerText = desc.fifteen;
                    document.getElementById('fourteen-desc').innerText = desc.fourteen || '无描述';

                    const detail = document.getElementById('detail');
                    detail.classList.add('show');
                    tagcloudContainer.classList.add('faded');

                    event.stopPropagation();
                }
            });
        });

        // 点击空白关闭
        document.body.addEventListener('click', () => {
            const detail = document.getElementById('detail');
            detail.classList.remove('show');
            tagcloudContainer.classList.remove('faded');
        });

        // 点击详情区域不关闭
        document.getElementById('detail').addEventListener('click', (event) => {
            event.stopPropagation();
        });
    </script>
</body>
</html>
